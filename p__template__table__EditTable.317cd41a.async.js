(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[139],{50019:function(B,S,d){"use strict";d.r(S);var _=d(57663),I=d(71577),r=d(39428),v=d(11849),y=d(3182),u=d(2824),E=d(67265),N=d(5894),L=d(14159),R=d(67294),Y=d(30381),T=d.n(Y),e=d(3382),o=d(85893);function f(){var t=(0,R.useState)(function(){return[]}),m=(0,u.Z)(t,2),h=m[0],g=m[1],O=(0,R.useRef)(),K=(0,R.useRef)(),w=(0,R.useState)(!1),P=(0,u.Z)(w,2),x=P[0],D=P[1],k=(0,R.useState)({}),A=(0,u.Z)(k,2),V=A[0],F=A[1],J=(0,R.useState)({}),b=(0,u.Z)(J,2),W=b[0],z=b[1],H=(0,R.useState)([]),Z=(0,u.Z)(H,2),U=Z[0],$=Z[1];(0,R.useEffect)(function(){G(),Q()},[]);var G=function(){var l=(0,y.Z)((0,r.Z)().mark(function p(){var a,n;return(0,r.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a={userId:"001"},D(!0),s.next=4,e.Z.getTableList(a);case 4:n=s.sent,D(!1),n&&n.success&&(n.data.list.map(function(c){return(0,v.Z)((0,v.Z)({},c),{},{ReportYearMonth:c.ReportYearMonth?T()(c.ReportYearMonth):null})}),$(n.data.list));case 7:case"end":return s.stop()}},p)}));return function(){return l.apply(this,arguments)}}(),Q=function(){var l=(0,y.Z)((0,r.Z)().mark(function p(){var a,n,i,s;return(0,r.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return a=["node_status","complate_condition"],C.next=3,e.Z.getDicList(a);case 3:n=C.sent,i=[],s=[],n.data.forEach(function(M){M.parentId==="node_status"&&s.push(M),M.parentId==="complate_condition"&&i.push(M)}),j(s,F),j(i,z);case 9:case"end":return C.stop()}},p)}));return function(){return l.apply(this,arguments)}}(),j=function(p,a){var n={};p.forEach(function(i){n[i.constantValue]={text:i.constantKey,status:i.constantValue}}),a(n)},X=[{title:"\u8D22\u52A1\u62A5\u8868\u7C7B\u578B",dataIndex:"ReportNm",valueType:"select",valueEnum:V,formItemProps:function(){return{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}}},{title:"\u62A5\u8868\u65F6\u95F4",dataIndex:"ReportYearMonth",valueType:"dateTime",formItemProps:function(){return{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}}},{title:"\u62A5\u8868\u5468\u671F\u7C7B\u578B",dataIndex:"ReportCycleTypeCd",valueType:"select",valueEnum:W,formItemProps:function(){return{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}}},{title:"\u64CD\u4F5C",valueType:"option",width:200,render:function(p,a,n,i){return[(0,o.jsx)("a",{onClick:function(){var c;i==null||(c=i.startEditable)===null||c===void 0||c.call(i,a.id)},children:"\u7F16\u8F91"},"editable"),(0,o.jsx)("a",{onClick:function(){var c,C,M=(c=O.current)===null||c===void 0?void 0:c.getFieldValue("table");(C=O.current)===null||C===void 0||C.setFieldsValue({table:M.filter(function(ee){return ee.id!==a.id})})},children:"\u5220\u9664"},"delete")]}}],q=function(){var l=(0,y.Z)((0,r.Z)().mark(function p(a){var n;return(0,r.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,a==null?void 0:a.validateFields();case 2:n=s.sent,console.log("result",n),n&&console.log("\u4FDD\u5B58");case 5:case"end":return s.stop()}},p)}));return function(a){return l.apply(this,arguments)}}();return(0,o.jsx)(E.ZP,{loading:x,children:(0,o.jsx)(N.A,{formRef:O,initialValues:{table:U},validateTrigger:"onBlur",submitter:{render:function(p,a){return console.log("props",p,a),[(0,o.jsx)(I.Z,{type:"primary",onClick:function(){return q(p.form)},children:"\u63D0\u4EA4"},"submit"),(0,o.jsx)(I.Z,{onClick:function(){var i;return(i=p.form)===null||i===void 0?void 0:i.resetFields()},children:"\u91CD\u7F6E"},"reset")]}},children:(0,o.jsx)(L.Z,{rowKey:"id",scroll:{x:960},editableFormRef:K,headerTitle:"\u53EF\u7F16\u8F91\u8868\u683C",maxLength:5,name:"table",request:(0,y.Z)((0,r.Z)().mark(function l(){return(0,r.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",{data:U});case 1:case"end":return a.stop()}},l)})),recordCreatorProps:{position:"bottom",record:function(){return{id:String(Date.now())}}},columns:X,editable:{type:"multiple",editableKeys:h,onChange:g,actionRender:function(p,a,n){return[n.save,n.delete]}}})})})}S.default=f},3382:function(B,S,d){"use strict";d.d(S,{Z:function(){return Y}});var _=d(11849),I={local:{API_URL:"https://www.fastmock.site/mock/f5d8d99de1a8ce59a932ad17a28ed974/temp"},dev:{API_URL:"https://www.fastmock.site/mock/f5d8d99de1a8ce59a932ad17a28ed974/temp"},prod:{API_URL:"https://www.fastmock.site/mock/f5d8d99de1a8ce59a932ad17a28ed974/temp"},API:{AUTH:"/auth/",BUSINESS:"/business/"}},r={LOGIN_TOKEN_STORAGE:"loginToken",BASE_URL:"https://www.fastmock.site/mock/f5d8d99de1a8ce59a932ad17a28ed974/temp",TABLE_LIST:"table_list",DIC_LIST:"dic_list",API:{AUTH:I.API.AUTH,BUSINESS:I.API.BUSINESS}},v=d(30381),y=d.n(v),u={code:0,host:"4cAFRxJHwo2Pg2iGAgzEJ/xkAj/0VjxT1iCpl2ZwluLPvev2Bms=",message:"success",success:!0,timestamp:"2022-11-07 20:53:25",traceId:"8ad100f984516cc4018452271ca6000b",data:{list:[{id:"000001",ReportCycleTypeCd:"1",ReportYearMonth:"2021-02-08 18:29:45",ReportNm:"0"},{id:"000002",ReportCycleTypeCd:"3",ReportYearMonth:"1986-09-22 15:34:32",ReportNm:"1"},{id:"000003",ReportCycleTypeCd:"2",ReportYearMonth:"2015-01-25 12:31:12",ReportNm:"1"},{id:"000004",ReportCycleTypeCd:"4",ReportYearMonth:"2002-10-27 06:41:45",ReportNm:"1"},{id:"000005",ReportCycleTypeCd:"1",ReportYearMonth:"1975-12-25 10:54:41",ReportNm:"1"},{id:"000006",ReportCycleTypeCd:"4",ReportYearMonth:"1995-11-03 08:30:29",ReportNm:"2"},{id:"000007",ReportCycleTypeCd:"4",ReportYearMonth:"2000-03-24 03:40:01",ReportNm:"2"},{id:"000008",ReportCycleTypeCd:"3",ReportYearMonth:"2003-01-07 10:39:00",ReportNm:"0"},{id:"000009",ReportCycleTypeCd:"3",ReportYearMonth:"2005-02-23 23:54:26",ReportNm:"1"},{id:"0000010",ReportCycleTypeCd:"4",ReportYearMonth:"2004-01-20 07:19:32",ReportNm:"0"},{id:"0000011",ReportCycleTypeCd:"2",ReportYearMonth:"1981-08-08 07:40:03",ReportNm:"1"},{id:"0000012",ReportCycleTypeCd:"2",ReportYearMonth:"1982-10-09 22:09:32",ReportNm:"3"},{id:"0000013",ReportCycleTypeCd:"4",ReportYearMonth:"1970-04-17 20:20:48",ReportNm:"1"},{id:"0000014",ReportCycleTypeCd:"1",ReportYearMonth:"1999-03-25 01:33:21",ReportNm:"1"},{id:"0000015",ReportCycleTypeCd:"3",ReportYearMonth:"2003-05-22 23:28:23",ReportNm:"1"},{id:"0000016",ReportCycleTypeCd:"4",ReportYearMonth:"2001-04-15 09:40:27",ReportNm:"0"},{id:"0000017",ReportCycleTypeCd:"4",ReportYearMonth:"1996-12-21 22:03:40",ReportNm:"2"},{id:"0000018",ReportCycleTypeCd:"2",ReportYearMonth:"2011-07-27 12:59:41",ReportNm:"0"},{id:"0000019",ReportCycleTypeCd:"4",ReportYearMonth:"1982-08-05 17:12:04",ReportNm:"2"},{id:"0000020",ReportCycleTypeCd:"3",ReportYearMonth:"2000-06-23 11:23:32",ReportNm:"1"},{id:"0000021",ReportCycleTypeCd:"2",ReportYearMonth:"2006-11-08 18:38:35",ReportNm:"2"},{id:"0000022",ReportCycleTypeCd:"3",ReportYearMonth:"2002-03-11 01:24:33",ReportNm:"0"},{id:"0000023",ReportCycleTypeCd:"1",ReportYearMonth:"2005-09-03 22:04:04",ReportNm:"1"},{id:"0000024",ReportCycleTypeCd:"3",ReportYearMonth:"2020-05-30 17:49:32",ReportNm:"1"},{id:"0000025",ReportCycleTypeCd:"4",ReportYearMonth:"2018-03-24 23:28:42",ReportNm:"1"},{id:"0000026",ReportCycleTypeCd:"2",ReportYearMonth:"1989-05-08 11:37:57",ReportNm:"2"},{id:"0000027",ReportCycleTypeCd:"3",ReportYearMonth:"1974-11-28 19:23:32",ReportNm:"0"},{id:"0000028",ReportCycleTypeCd:"2",ReportYearMonth:"2009-01-20 18:02:03",ReportNm:"0"},{id:"0000029",ReportCycleTypeCd:"3",ReportYearMonth:"1983-06-10 13:54:43",ReportNm:"2"},{id:"0000030",ReportCycleTypeCd:"2",ReportYearMonth:"2007-12-13 00:21:06",ReportNm:"2"},{id:"0000031",ReportCycleTypeCd:"4",ReportYearMonth:"2022-10-26 21:19:54",ReportNm:"2"},{id:"0000032",ReportCycleTypeCd:"1",ReportYearMonth:"2011-11-12 04:06:12",ReportNm:"1"},{id:"0000033",ReportCycleTypeCd:"2",ReportYearMonth:"1973-02-21 21:33:32",ReportNm:"1"},{id:"0000034",ReportCycleTypeCd:"2",ReportYearMonth:"2012-01-11 12:14:41",ReportNm:"0"},{id:"0000035",ReportCycleTypeCd:"1",ReportYearMonth:"2004-11-30 11:28:05",ReportNm:"1"},{id:"0000036",ReportCycleTypeCd:"1",ReportYearMonth:"2000-09-22 00:34:21",ReportNm:"3"},{id:"0000037",ReportCycleTypeCd:"2",ReportYearMonth:"1985-01-18 07:52:37",ReportNm:"0"},{id:"0000038",ReportCycleTypeCd:"3",ReportYearMonth:"1970-05-06 00:17:48",ReportNm:"0"},{id:"0000039",ReportCycleTypeCd:"2",ReportYearMonth:"2003-09-05 03:27:43",ReportNm:"1"},{id:"0000040",ReportCycleTypeCd:"3",ReportYearMonth:"2016-05-26 21:43:39",ReportNm:"0"},{id:"0000041",ReportCycleTypeCd:"3",ReportYearMonth:"2019-07-14 05:43:32",ReportNm:"2"},{id:"0000042",ReportCycleTypeCd:"2",ReportYearMonth:"1978-11-06 05:26:47",ReportNm:"2"},{id:"0000043",ReportCycleTypeCd:"1",ReportYearMonth:"2020-11-08 19:24:34",ReportNm:"0"},{id:"0000044",ReportCycleTypeCd:"3",ReportYearMonth:"1997-12-07 00:30:57",ReportNm:"1"},{id:"0000045",ReportCycleTypeCd:"4",ReportYearMonth:"1991-10-10 04:12:16",ReportNm:"2"},{id:"0000046",ReportCycleTypeCd:"3",ReportYearMonth:"1975-01-02 12:46:05",ReportNm:"1"},{id:"0000047",ReportCycleTypeCd:"4",ReportYearMonth:"1986-01-28 01:57:25",ReportNm:"2"},{id:"0000048",ReportCycleTypeCd:"2",ReportYearMonth:"2020-01-10 00:35:10",ReportNm:"1"},{id:"0000049",ReportCycleTypeCd:"4",ReportYearMonth:"1972-09-06 18:39:12",ReportNm:"3"},{id:"0000050",ReportCycleTypeCd:"4",ReportYearMonth:"1993-10-01 04:49:40",ReportNm:"2"},{id:"0000051",ReportCycleTypeCd:"1",ReportYearMonth:"2010-08-12 01:19:56",ReportNm:"2"},{id:"0000052",ReportCycleTypeCd:"2",ReportYearMonth:"1996-05-20 16:57:24",ReportNm:"1"},{id:"0000053",ReportCycleTypeCd:"1",ReportYearMonth:"2013-02-06 15:19:58",ReportNm:"0"},{id:"0000054",ReportCycleTypeCd:"1",ReportYearMonth:"1977-11-14 14:24:51",ReportNm:"1"},{id:"0000055",ReportCycleTypeCd:"3",ReportYearMonth:"2015-08-08 02:25:58",ReportNm:"1"}],pageSize:10,total:55,current:1}};u.data.pageSize=10,u.data.total=u.data.list.length,u.data.current=1;var E=u,N={code:0,success:!0,message:"success",traceId:"8ad100f984516cc4018461370850031f",host:"y9ZoyVZO+ZRGLSyjRCPGAyoPAo/E/SQrfxh1OX1CFEOmDt2OrrQ=",timestamp:"2022-11-10 19:05:07",data:[{id:"node_processed",parentId:"node_status",constantKey:"\u8D44\u4EA7\u8D1F\u503A\u8868",constantValue:"0",description:"\u8D44\u4EA7\u8D1F\u503A\u8868",createUser:null,constantRank:null,createTime:"2022-06-21 11:14:05",updateTime:null},{id:"node_pending",parentId:"node_status",constantKey:"\u73B0\u91D1\u6D41\u91CF\u8868",constantValue:"1",description:"\u73B0\u91D1\u6D41\u91CF\u8868",createUser:null,constantRank:null,createTime:"2022-06-21 11:14:05",updateTime:null},{id:"node_in_process",parentId:"node_status",constantKey:"\u5229\u6DA6\u53CA\u5229\u6DA6\u5206\u914D\u8868",constantValue:"2",description:"\u5229\u6DA6\u53CA\u5229\u6DA6\u5206\u914D\u8868",createUser:null,constantRank:null,createTime:"2022-06-21 11:14:05",updateTime:null},{id:"node_rejected",parentId:"node_status",constantKey:"\u8D22\u52A1\u6307\u6807\u8868",constantValue:"3",description:"\u8D22\u52A1\u6307\u6807\u8868",createUser:null,constantRank:0,createTime:null,updateTime:null},{id:"all",parentId:"complate_condition",constantKey:"\u7B2C\u4E00\u5B63\u5EA6",constantValue:"1",description:"\u7B2C\u4E00\u5B63\u5EA6",createUser:"",constantRank:0,createTime:"2022-07-05 16:59:05",updateTime:"2022-07-05 16:59:07"},{id:"half",parentId:"complate_condition",constantKey:"\u7B2C\u4E8C\u5B63\u5EA6",constantValue:"2",description:"\u7B2C\u4E8C\u5B63\u5EA6",createUser:"",constantRank:1,createTime:"2022-07-05 16:59:05",updateTime:"2022-07-05 16:59:07"},{id:"any",parentId:"complate_condition",constantKey:"\u7B2C\u4E09\u5B63\u5EA6",constantValue:"3",description:"\u7B2C\u4E09\u5B63\u5EA6",createUser:"",constantRank:2,createTime:"2022-07-05 16:59:05",updateTime:"2022-07-05 16:59:07"},{id:"custom",parentId:"complate_condition",constantKey:"\u7B2C\u56DB\u5B63\u5EA6",constantValue:"4",description:"\u7B2C\u56DB\u5B63\u5EA6",createUser:null,constantRank:3,createTime:null,updateTime:null}]},L=N,R={getTableList:function(e){return new Promise(function(o,f){localStorage.getItem(r.TABLE_LIST)||localStorage.setItem(r.TABLE_LIST,JSON.stringify(E)),o(JSON.parse(localStorage.getItem(r.TABLE_LIST)))})},getList:function(e){return console.log("options",e),new Promise(function(o,f){localStorage.getItem(r.TABLE_LIST)||localStorage.setItem(r.TABLE_LIST,JSON.stringify(E));var t=JSON.parse(localStorage.getItem(r.TABLE_LIST)),m=Math.ceil(t.data.total/e.pageSize);if(m<1){o((0,_.Z)((0,_.Z)({},t),{},{data:{pageSize:e.pageSize,list:[],total:0,current:1}}));return}if(e.pageIndex===1){o((0,_.Z)((0,_.Z)({},t),{},{data:{pageSize:e.pageSize,list:t.data.list.filter(function(h,g){return g<e.pageIndex*e.pageSize}),total:t.data.total,current:e.pageIndex}}));return}o((0,_.Z)((0,_.Z)({},t),{},{data:{pageSize:e.pageSize,list:t.data.list.filter(function(h,g){return g>=(e.pageIndex-1)*e.pageSize&&g<e.pageIndex*e.pageSize}),total:t.data.total,current:e.pageIndex}}))})},getDicList:function(e){return new Promise(function(o,f){localStorage.getItem(r.DIC_LIST)||localStorage.setItem(r.DIC_LIST,JSON.stringify(L)),o(JSON.parse(localStorage.getItem(r.DIC_LIST)))})},addList:function(e){return new Promise(function(o,f){var t=JSON.parse(localStorage.getItem(r.TABLE_LIST)),m=(0,_.Z)((0,_.Z)({},e),{},{id:Date.now().toString()});t.data.list.unshift(m),t.data.total=t.data.list.length,localStorage.setItem(r.TABLE_LIST,JSON.stringify(t)),o({code:0,data:null,message:"\u64CD\u4F5C\u6210\u529F",success:!0,timestamp:y()().format("YYYY-MM-DD HH:mm:ss"),traceId:"8ad100f984516cc4018452271ca6000b"})})},editList:function(e){return new Promise(function(o,f){var t=JSON.parse(localStorage.getItem(r.TABLE_LIST)),m=t.data.list.map(function(h){return h.id===e.id?e:h});t.data.list=m,t.data.total=m.length,localStorage.setItem(r.TABLE_LIST,JSON.stringify(t)),o({code:0,data:null,message:"\u64CD\u4F5C\u6210\u529F",success:!0,timestamp:y()().format("YYYY-MM-DD HH:mm:ss"),traceId:"8ad100f984516cc4018452271ca6000b"})})},deleteList:function(e){return new Promise(function(o,f){var t=JSON.parse(localStorage.getItem(r.TABLE_LIST));t.data.list=t.data.list.filter(function(m){return m.id!==e}),t.data.total=t.data.list.length,localStorage.setItem(r.TABLE_LIST,JSON.stringify(t)),o({code:0,data:null,message:"\u64CD\u4F5C\u6210\u529F",success:!0,timestamp:y()().format("YYYY-MM-DD HH:mm:ss"),traceId:"8ad100f984516cc4018452271ca6000b"})})}},Y=R}}]);
