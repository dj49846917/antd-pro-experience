(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[531],{34687:function(D){D.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",icon:"icon___rzGKO"}},19319:function(D,O,s){"use strict";s.r(O);var ee=s(18106),M=s(60508),se=s(34792),E=s(48086),_=s(39428),j=s(11849),c=s(3182),B=s(2824),ae=s(17462),y=s(76772),R=s(71390),W=s(36108),K=s(48107),S=s(39464),b=s(89366),C=s(2603),N=s(29985),H=s(70469),h=s(5966),z=s(16434),$=s(63434),x=s(67294),n=s(25377),G=s(34687),u=s.n(G),e=s(85893),L=function(P){var m=P.content;return(0,e.jsx)(y.Z,{style:{marginBottom:24},message:m,type:"error",showIcon:!0})},V=function(){var P=(0,x.useState)({}),m=(0,B.Z)(P,2),T=m[0],J=m[1],Q=(0,x.useState)("account"),I=(0,B.Z)(Q,2),v=I[0],X=I[1],U=(0,n.tT)("@@initialState"),p=U.initialState,w=U.setInitialState,r=(0,n.YB)(),k=function(){var l=(0,c.Z)((0,_.Z)().mark(function i(){var a,g;return(0,_.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,p==null||(a=p.fetchUserInfo)===null||a===void 0?void 0:a.call(p);case 2:if(g=o.sent,!g){o.next=6;break}return o.next=6,w(function(f){return(0,j.Z)((0,j.Z)({},f),{},{currentUser:g})});case 6:case"end":return o.stop()}},i)}));return function(){return l.apply(this,arguments)}}(),q=function(){var l=(0,c.Z)((0,_.Z)().mark(function i(){var a,g,d,o,f,F;return(0,_.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a={status:"ok",type:"account",currentAuthority:"admin"},console.log("msg",JSON.stringify(a)),a.status!=="ok"){t.next=14;break}return g=r.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),E.ZP.success(g),t.next=8,k();case 8:if(n.m8){t.next=10;break}return t.abrupt("return");case 10:return d=n.m8.location.query,o=d,f=o.redirect,n.m8.push(f||"/"),t.abrupt("return");case 14:console.log(a),J(a),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(0),F=r.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),E.ZP.error(F);case 22:case"end":return t.stop()}},i,null,[[0,18]])}));return function(){return l.apply(this,arguments)}}(),A=T.status,Z=T.type;return(0,e.jsxs)("div",{className:u().container,children:[(0,e.jsx)("div",{className:u().lang,"data-lang":!0,children:n.pD&&(0,e.jsx)(n.pD,{})}),(0,e.jsx)("div",{className:u().content,children:(0,e.jsxs)(H.U,{logo:(0,e.jsx)("img",{alt:"logo",src:"/logo.svg"}),title:"Ant Design",subTitle:r.formatMessage({id:"pages.layouts.userLayout.title"}),initialValues:{autoLogin:!0},actions:[(0,e.jsx)(n._H,{id:"pages.login.loginWith",defaultMessage:"\u5176\u4ED6\u767B\u5F55\u65B9\u5F0F"},"loginWith"),(0,e.jsx)(W.Z,{className:u().icon},"AlipayCircleOutlined"),(0,e.jsx)(K.Z,{className:u().icon},"TaobaoCircleOutlined"),(0,e.jsx)(S.Z,{className:u().icon},"WeiboCircleOutlined")],onFinish:function(){var l=(0,c.Z)((0,_.Z)().mark(function i(a){return(0,_.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,q(a);case 2:case"end":return d.stop()}},i)}));return function(i){return l.apply(this,arguments)}}(),children:[(0,e.jsxs)(M.Z,{activeKey:v,onChange:X,children:[(0,e.jsx)(M.Z.TabPane,{tab:r.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"})},"account"),(0,e.jsx)(M.Z.TabPane,{tab:r.formatMessage({id:"pages.login.phoneLogin.tab",defaultMessage:"\u624B\u673A\u53F7\u767B\u5F55"})},"mobile")]}),A==="error"&&Z==="account"&&(0,e.jsx)(L,{content:r.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF(admin/ant.design)"})}),v==="account"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(h.Z,{name:"username",fieldProps:{size:"large",prefix:(0,e.jsx)(b.Z,{className:u().prefixIcon})},placeholder:r.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: admin or user"}),rules:[{required:!0,message:(0,e.jsx)(n._H,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,e.jsx)(h.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,e.jsx)(C.Z,{className:u().prefixIcon})},placeholder:r.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: ant.design"}),rules:[{required:!0,message:(0,e.jsx)(n._H,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),A==="error"&&Z==="mobile"&&(0,e.jsx)(L,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),v==="mobile"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(h.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(N.Z,{className:u().prefixIcon})},name:"mobile",placeholder:r.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:(0,e.jsx)(n._H,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:(0,e.jsx)(n._H,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),(0,e.jsx)(z.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(C.Z,{className:u().prefixIcon})},captchaProps:{size:"large"},placeholder:r.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),captchaTextRender:function(i,a){return i?"".concat(a," ").concat(r.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})):r.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})},name:"captcha",rules:[{required:!0,message:(0,e.jsx)(n._H,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}],onGetCaptcha:(0,c.Z)((0,_.Z)().mark(function l(){return(0,_.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:E.ZP.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 1:case"end":return a.stop()}},l)}))})]}),(0,e.jsxs)("div",{style:{marginBottom:24},children:[(0,e.jsx)($.Z,{noStyle:!0,name:"autoLogin",children:(0,e.jsx)(n._H,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),(0,e.jsx)("a",{style:{float:"right"},children:(0,e.jsx)(n._H,{id:"pages.login.forgotPassword",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801"})})]})]})}),(0,e.jsx)(R.Z,{})]})};O.default=V}}]);
