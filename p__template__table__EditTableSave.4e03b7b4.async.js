(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[675],{94886:function(K,L,s){"use strict";s.r(L);var g=s(57663),C=s(71577),a=s(39428),y=s(11849),T=s(3182),m=s(2824),h=s(67265),O=s(5894),D=s(14159),f=s(67294),P=s(30381),S=s.n(P),e=s(3382),n=s(85893);function I(){var t=(0,f.useState)([]),_=(0,m.Z)(t,2),R=_[0],v=_[1],A=(0,f.useRef)(),Y=(0,f.useRef)(),w=(0,f.useState)(!1),M=(0,m.Z)(w,2),x=M[0],b=M[1],k=(0,f.useState)({}),Z=(0,m.Z)(k,2),V=Z[0],F=Z[1],J=(0,f.useState)({}),U=(0,m.Z)(J,2),W=U[0],z=U[1],H=(0,f.useState)([]),j=(0,m.Z)(H,2),B=j[0],$=j[1];(0,f.useEffect)(function(){G(),Q()},[]);var G=function(){var d=(0,T.Z)((0,a.Z)().mark(function l(){var r,o,i;return(0,a.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return r={userId:"001"},b(!0),u.next=4,e.Z.getTableList(r);case 4:o=u.sent,b(!1),o&&o.success&&(o.data.list.map(function(c){return(0,y.Z)((0,y.Z)({},c),{},{ReportYearMonth:c.ReportYearMonth?S()(c.ReportYearMonth):null})}),i=o.data.list.map(function(c){return c.id}),v(i),$(o.data.list));case 7:case"end":return u.stop()}},l)}));return function(){return d.apply(this,arguments)}}(),Q=function(){var d=(0,T.Z)((0,a.Z)().mark(function l(){var r,o,i,p;return(0,a.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=["node_status","complate_condition"],c.next=3,e.Z.getDicList(r);case 3:o=c.sent,i=[],p=[],o.data.forEach(function(E){E.parentId==="node_status"&&p.push(E),E.parentId==="complate_condition"&&i.push(E)}),N(p,F),N(i,z);case 9:case"end":return c.stop()}},l)}));return function(){return d.apply(this,arguments)}}(),N=function(l,r){var o={};l.forEach(function(i){o[i.constantValue]={text:i.constantKey,status:i.constantValue}}),r(o)},X=[{title:"\u8D22\u52A1\u62A5\u8868\u7C7B\u578B",dataIndex:"ReportNm",valueType:"select",valueEnum:V,formItemProps:function(){return{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}}},{title:"\u62A5\u8868\u65F6\u95F4",dataIndex:"ReportYearMonth",valueType:"dateTime",formItemProps:function(){return{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}}},{title:"\u62A5\u8868\u5468\u671F\u7C7B\u578B",dataIndex:"ReportCycleTypeCd",valueType:"select",valueEnum:W,formItemProps:function(){return{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}}},{title:"\u64CD\u4F5C",valueType:"option",width:200,render:function(l,r,o,i){return[(0,n.jsx)("a",{onClick:function(){var u;i==null||(u=i.startEditable)===null||u===void 0||u.call(i,r.id)},children:"\u7F16\u8F91"},"editable"),(0,n.jsx)("a",{onClick:function(){var u,c,E=(u=A.current)===null||u===void 0?void 0:u.getFieldValue("table");(c=A.current)===null||c===void 0||c.setFieldsValue({table:E.filter(function(ee){return ee.id!==r.id})})},children:"\u5220\u9664"},"delete")]}}],q=function(){var d=(0,T.Z)((0,a.Z)().mark(function l(r){var o;return(0,a.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,r==null?void 0:r.validateFields();case 2:o=p.sent,o&&console.log("\u4FDD\u5B58");case 4:case"end":return p.stop()}},l)}));return function(r){return d.apply(this,arguments)}}();return(0,n.jsx)(h.ZP,{loading:x,children:(0,n.jsx)(O.A,{formRef:A,initialValues:{table:B},validateTrigger:"onBlur",submitter:{render:function(l,r){return console.log("props",l,r),[(0,n.jsx)(C.Z,{type:"primary",onClick:function(){return q(l.form)},children:"\u63D0\u4EA4"},"submit"),(0,n.jsx)(C.Z,{onClick:function(){var i;return(i=l.form)===null||i===void 0?void 0:i.resetFields()},children:"\u91CD\u7F6E"},"reset")]}},children:(0,n.jsx)(D.Z,{rowKey:"id",scroll:{x:960},editableFormRef:Y,headerTitle:"\u53EF\u7F16\u8F91\u8868\u683C",maxLength:5,name:"table",request:(0,T.Z)((0,a.Z)().mark(function d(){return(0,a.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",{data:B});case 1:case"end":return r.stop()}},d)})),recordCreatorProps:{position:"bottom",record:function(){return{id:String(Date.now())}}},columns:X,editable:{type:"multiple",editableKeys:R,onChange:v,actionRender:function(l,r,o){return[o.delete]}}})})})}L.default=I},3382:function(K,L,s){"use strict";s.d(L,{Z:function(){return P}});var g=s(11849),C={local:{API_URL:"https://www.fastmock.site/mock/f5d8d99de1a8ce59a932ad17a28ed974/temp"},dev:{API_URL:"https://www.fastmock.site/mock/f5d8d99de1a8ce59a932ad17a28ed974/temp"},prod:{API_URL:"https://www.fastmock.site/mock/f5d8d99de1a8ce59a932ad17a28ed974/temp"},API:{AUTH:"/auth/",BUSINESS:"/business/"}},a={LOGIN_TOKEN_STORAGE:"loginToken",BASE_URL:"https://www.fastmock.site/mock/f5d8d99de1a8ce59a932ad17a28ed974/temp",TABLE_LIST:"table_list",DIC_LIST:"dic_list",API:{AUTH:C.API.AUTH,BUSINESS:C.API.BUSINESS}},y=s(30381),T=s.n(y),m={code:0,host:"4cAFRxJHwo2Pg2iGAgzEJ/xkAj/0VjxT1iCpl2ZwluLPvev2Bms=",message:"success",success:!0,timestamp:"2022-11-07 20:53:25",traceId:"8ad100f984516cc4018452271ca6000b",data:{list:[{id:"000001",ReportCycleTypeCd:"1",ReportYearMonth:"2021-02-08 18:29:45",ReportNm:"0"},{id:"000002",ReportCycleTypeCd:"3",ReportYearMonth:"1986-09-22 15:34:32",ReportNm:"1"},{id:"000003",ReportCycleTypeCd:"2",ReportYearMonth:"2015-01-25 12:31:12",ReportNm:"1"},{id:"000004",ReportCycleTypeCd:"4",ReportYearMonth:"2002-10-27 06:41:45",ReportNm:"1"},{id:"000005",ReportCycleTypeCd:"1",ReportYearMonth:"1975-12-25 10:54:41",ReportNm:"1"},{id:"000006",ReportCycleTypeCd:"4",ReportYearMonth:"1995-11-03 08:30:29",ReportNm:"2"},{id:"000007",ReportCycleTypeCd:"4",ReportYearMonth:"2000-03-24 03:40:01",ReportNm:"2"},{id:"000008",ReportCycleTypeCd:"3",ReportYearMonth:"2003-01-07 10:39:00",ReportNm:"0"},{id:"000009",ReportCycleTypeCd:"3",ReportYearMonth:"2005-02-23 23:54:26",ReportNm:"1"},{id:"0000010",ReportCycleTypeCd:"4",ReportYearMonth:"2004-01-20 07:19:32",ReportNm:"0"},{id:"0000011",ReportCycleTypeCd:"2",ReportYearMonth:"1981-08-08 07:40:03",ReportNm:"1"}],pageSize:10,total:11,current:1}};m.data.pageSize=10,m.data.total=m.data.list.length,m.data.current=1;var h=m,O={code:0,success:!0,message:"success",traceId:"8ad100f984516cc4018461370850031f",host:"y9ZoyVZO+ZRGLSyjRCPGAyoPAo/E/SQrfxh1OX1CFEOmDt2OrrQ=",timestamp:"2022-11-10 19:05:07",data:[{id:"node_processed",parentId:"node_status",constantKey:"\u8D44\u4EA7\u8D1F\u503A\u8868",constantValue:"0",description:"\u8D44\u4EA7\u8D1F\u503A\u8868",createUser:null,constantRank:null,createTime:"2022-06-21 11:14:05",updateTime:null},{id:"node_pending",parentId:"node_status",constantKey:"\u73B0\u91D1\u6D41\u91CF\u8868",constantValue:"1",description:"\u73B0\u91D1\u6D41\u91CF\u8868",createUser:null,constantRank:null,createTime:"2022-06-21 11:14:05",updateTime:null},{id:"node_in_process",parentId:"node_status",constantKey:"\u5229\u6DA6\u53CA\u5229\u6DA6\u5206\u914D\u8868",constantValue:"2",description:"\u5229\u6DA6\u53CA\u5229\u6DA6\u5206\u914D\u8868",createUser:null,constantRank:null,createTime:"2022-06-21 11:14:05",updateTime:null},{id:"node_rejected",parentId:"node_status",constantKey:"\u8D22\u52A1\u6307\u6807\u8868",constantValue:"3",description:"\u8D22\u52A1\u6307\u6807\u8868",createUser:null,constantRank:0,createTime:null,updateTime:null},{id:"all",parentId:"complate_condition",constantKey:"\u7B2C\u4E00\u5B63\u5EA6",constantValue:"1",description:"\u7B2C\u4E00\u5B63\u5EA6",createUser:"",constantRank:0,createTime:"2022-07-05 16:59:05",updateTime:"2022-07-05 16:59:07"},{id:"half",parentId:"complate_condition",constantKey:"\u7B2C\u4E8C\u5B63\u5EA6",constantValue:"2",description:"\u7B2C\u4E8C\u5B63\u5EA6",createUser:"",constantRank:1,createTime:"2022-07-05 16:59:05",updateTime:"2022-07-05 16:59:07"},{id:"any",parentId:"complate_condition",constantKey:"\u7B2C\u4E09\u5B63\u5EA6",constantValue:"3",description:"\u7B2C\u4E09\u5B63\u5EA6",createUser:"",constantRank:2,createTime:"2022-07-05 16:59:05",updateTime:"2022-07-05 16:59:07"},{id:"custom",parentId:"complate_condition",constantKey:"\u7B2C\u56DB\u5B63\u5EA6",constantValue:"4",description:"\u7B2C\u56DB\u5B63\u5EA6",createUser:null,constantRank:3,createTime:null,updateTime:null}]},D=O,f={getTableList:function(e){return new Promise(function(n,I){localStorage.getItem(a.TABLE_LIST)||localStorage.setItem(a.TABLE_LIST,JSON.stringify(h)),n(JSON.parse(localStorage.getItem(a.TABLE_LIST)))})},getList:function(e){return console.log("options",e),new Promise(function(n,I){localStorage.getItem(a.TABLE_LIST)||localStorage.setItem(a.TABLE_LIST,JSON.stringify(h));var t=JSON.parse(localStorage.getItem(a.TABLE_LIST)),_=Math.ceil(t.data.total/e.pageSize);if(_<1){n((0,g.Z)((0,g.Z)({},t),{},{data:{pageSize:e.pageSize,list:[],total:0,current:1}}));return}if(e.pageIndex===1){n((0,g.Z)((0,g.Z)({},t),{},{data:{pageSize:e.pageSize,list:t.data.list.filter(function(R,v){return v<e.pageIndex*e.pageSize}),total:t.data.total,current:e.pageIndex}}));return}n((0,g.Z)((0,g.Z)({},t),{},{data:{pageSize:e.pageSize,list:t.data.list.filter(function(R,v){return v>=(e.pageIndex-1)*e.pageSize&&v<e.pageIndex*e.pageSize}),total:t.data.total,current:e.pageIndex}}))})},getDicList:function(e){return new Promise(function(n,I){localStorage.getItem(a.DIC_LIST)||localStorage.setItem(a.DIC_LIST,JSON.stringify(D)),n(JSON.parse(localStorage.getItem(a.DIC_LIST)))})},addList:function(e){return new Promise(function(n,I){var t=JSON.parse(localStorage.getItem(a.TABLE_LIST)),_=(0,g.Z)((0,g.Z)({},e),{},{id:Date.now().toString()});t.data.list.unshift(_),t.data.total=t.data.list.length,localStorage.setItem(a.TABLE_LIST,JSON.stringify(t)),n({code:0,data:null,message:"\u64CD\u4F5C\u6210\u529F",success:!0,timestamp:T()().format("YYYY-MM-DD HH:mm:ss"),traceId:"8ad100f984516cc4018452271ca6000b"})})},editList:function(e){return new Promise(function(n,I){var t=JSON.parse(localStorage.getItem(a.TABLE_LIST)),_=t.data.list.map(function(R){return R.id===e.id?e:R});t.data.list=_,t.data.total=_.length,localStorage.setItem(a.TABLE_LIST,JSON.stringify(t)),n({code:0,data:null,message:"\u64CD\u4F5C\u6210\u529F",success:!0,timestamp:T()().format("YYYY-MM-DD HH:mm:ss"),traceId:"8ad100f984516cc4018452271ca6000b"})})},deleteList:function(e){return new Promise(function(n,I){var t=JSON.parse(localStorage.getItem(a.TABLE_LIST));t.data.list=t.data.list.filter(function(_){return _.id!==e}),t.data.total=t.data.list.length,localStorage.setItem(a.TABLE_LIST,JSON.stringify(t)),n({code:0,data:null,message:"\u64CD\u4F5C\u6210\u529F",success:!0,timestamp:T()().format("YYYY-MM-DD HH:mm:ss"),traceId:"8ad100f984516cc4018452271ca6000b"})})}},P=f}}]);
